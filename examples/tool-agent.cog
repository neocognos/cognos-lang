# Agent with tools — flows are tools
flow get_weather(city: String) -> String:
    "Get the current weather for a city"
    return f"Weather in {city}: 22°C, sunny"

flow get_time() -> String:
    "Get the current date and time"
    result = exec(shell("date"))
    return result.strip()

flow main():
    write(stdout, "Agent with tools. Try: What's the weather in Amsterdam?")
    loop:
        input = read()
        if input == "quit":
            break
        response = think(input, tools=["get_weather", "get_time"])
        loop max=3:
            if not response.has_tool_calls:
                break
            response = exec(response, tools=["get_weather", "get_time"])
            response = think(response.content, tools=["get_weather", "get_time"])
        write(stdout, response.content)
