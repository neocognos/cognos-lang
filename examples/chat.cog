# Simple chat agent with conversation history
flow main():
    history = []
    write(stdout, "Chat ready. Type 'quit' to exit.")
    loop:
        input = read()
        if input == "quit":
            break
        history = history + [f"User: {input}"]
        context = history.join("\n")
        response = think(context, model="qwen2.5:7b", system="You are a helpful assistant. Be concise.")
        history = history + [f"Assistant: {response}"]
        write(stdout, response)
