# General-purpose conversational agent with history
flow main():
    history = []
    write(stdout, "Assistant ready. Type 'quit' to exit.")
    loop:
        input = read()
        if input == "quit":
            break
        history = history + [f"User: {input}"]
        context = history.join("\n")
        response = think(context, system="You are a helpful assistant. Be concise.")
        history = history + [f"Assistant: {response}"]
        write(stdout, response)
